# Project Architecture

**Last Updated**: 2026-02-06
**Type**: Claude Code Extensions Collection
**Generated By**: codemap-updater agent

## Overview

This repository provides custom extensions for Claude Code and Codex CLI: Commands, Skills, and Agents. Extensions are installed via symlinks (use `/skill-link`) to `~/.claude/` and `~/.codex/`.

## Directory Structure

```
claude-code-addons/
├── commands/           # Slash commands (invoke agents)
│   ├── plan.md
│   ├── architect.md
│   ├── code-invs.md
│   ├── refactor-clean.md
│   ├── update-codemaps.md
│   └── e2e.md
├── agents/             # Background processing agents
│   ├── code-reviewer/
│   ├── codebase-investigator/
│   ├── planner/
│   ├── architect/
│   ├── refactor-cleaner/
│   ├── codemap-updater/
│   └── e2e-browser/
├── skills/             # Interactive workflows (cross-tool)
│   ├── continuous-learning/
│   ├── cr/
│   ├── eval/
│   ├── eval-harness/
│   ├── peer-review/
│   ├── tdd/
│   ├── skill-link/
│   ├── drawio/
│   ├── research/
│   ├── implement/
│   ├── spec-interview/
│   ├── tech-design/
│   ├── agent-browser/
│   ├── cli-style/
│   ├── daily/
│   └── pyenv/
├── codemaps/           # Architecture documentation
├── CLAUDE.md           # Project instructions
└── README.md           # Documentation
```

## Extension Types

| Type | Context | Trigger | Location | Install Path |
|------|---------|---------|----------|--------------|
| Command | Main context | `/command-name` | `commands/{name}.md` | `~/.claude/commands/` |
| Skill | Main context | `/skill-name` | `skills/{name}/SKILL.md` | `~/.claude/skills/` + `~/.codex/skills/` |
| Agent | Isolated subprocess | `Task(type)` or keywords | `agents/{name}/agent.md` | `~/.claude/agents/` |

## Component Relationships

```
User Input
    │
    ├─► /plan ──────────► planner agent
    ├─► /architect ─────► architect agent
    ├─► /cr ────────────► cr skill ──► code-reviewer agent ──► Codex
    │                                  (or Codex CLI ──► claude -p)
    ├─► /peer-review ──► peer-review skill (inbound verify / outbound challenge)
    ├─► /eval ──────────► eval skill (define/check/report)
    ├─► /learn ─────────► continuous-learning skill
    ├─► /tdd ───────────► tdd skill
    ├─► /code-invs ─────► codebase-investigator agent ──► notes/
    ├─► /refactor-clean ► refactor-cleaner agent ──► .reports/
    ├─► /update-codemaps► codemap-updater agent ──► codemaps/
    └─► /e2e ───────────► e2e-browser agent ──► Chrome MCP
```

## Agent Configuration Pattern

All agents require YAML frontmatter:

```yaml
---
name: agent-name
description: "Short description. Keywords: trigger1, trigger2"
model: inherit | opus | sonnet
tools: Read, Write, Edit, Bash, Grep, Glob  # optional
---
```

## Workflow Integration

| Starting Point | Next Steps |
|----------------|------------|
| `/code-invs` | `/plan` (understand before change) |
| `/plan` | `/tdd` or `/architect` |
| `/architect` | `/plan` then `/tdd` |
| `/tdd` | `/cr` (review implementation) |
| `/cr` | `/peer-review` (verify findings), fix issues, commit |
| `/refactor-clean` | `/cr` (review cleanup) |
| `/update-codemaps` | Commit codemaps |

## Installation

Use `/skill-link` to install all extensions, or manually:

```bash
# Command
ln -sf $(pwd)/commands/{name}.md ~/.claude/commands/{name}.md

# Skill (both tools)
ln -sfn $(pwd)/skills/{name} ~/.claude/skills/{name}
ln -sfn $(pwd)/skills/{name} ~/.codex/skills/{name}

# Agent
ln -sf $(pwd)/agents/{name}/agent.md ~/.claude/agents/{name}.md
```
