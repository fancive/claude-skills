# Project Architecture

**Last Updated**: 2026-01-25
**Type**: Claude Code Extensions Collection
**Generated By**: codemap-updater agent

## Overview

This repository provides custom extensions for Claude Code: Commands, Skills, Agents, and Plugins. Extensions are installed via symlinks to `~/.claude/` and enhance Claude Code's capabilities with specialized workflows for code review, planning, testing, and more.

## Directory Structure

```
claude-code-addons/
├── commands/           # Slash commands (invoke agents)
│   ├── plan.md
│   ├── architect.md
│   ├── tdd.md
│   ├── cr.md
│   ├── code-invs.md
│   ├── refactor-clean.md
│   ├── update-codemaps.md
│   └── e2e.md
├── agents/             # Background processing agents
│   ├── code-reviewer/
│   ├── codebase-investigator/
│   ├── planner/
│   ├── architect/
│   ├── tdd-guide/
│   ├── refactor-cleaner/
│   ├── codemap-updater/
│   └── e2e-browser/
├── skills/             # Interactive workflows
│   └── reflect/
├── plugins/            # Auto-loaded plugins (empty)
├── templates/          # File templates for skills
│   ├── learned-rules.md
│   └── reflect-log.md
├── CLAUDE.md           # Project instructions
└── README.md           # Documentation
```

## Extension Types

| Type | Context | Trigger | Location | Install Path |
|------|---------|---------|----------|--------------|
| Command | Main context | `/command-name` | `commands/{name}.md` | `~/.claude/commands/` |
| Skill | Main context | `/skill-name` | `skills/{name}/SKILL.md` | `~/.claude/skills/` |
| Agent | Isolated subprocess | `Task(type)` or keywords | `agents/{name}/agent.md` | `~/.claude/agents/` |
| Plugin | Varies | Auto-loaded | `plugins/` | `~/.claude/plugins/` |

## Component Relationships

```
User Input
    │
    ├─► /plan ──────────► planner agent
    ├─► /architect ─────► architect agent
    ├─► /tdd ───────────► tdd-guide agent
    ├─► /cr ────────────► code-reviewer agent ──► OpenAI Codex
    ├─► /code-invs ─────► codebase-investigator agent ──► notes/
    ├─► /refactor-clean ► refactor-cleaner agent ──► .reports/
    ├─► /update-codemaps► codemap-updater agent ──► codemaps/
    └─► /e2e ───────────► e2e-browser agent ──► Chrome MCP

    /reflect ───────────► reflect skill (two-phase)
                              │
                              ├─► .claude/pending-rules.md
                              └─► .claude/learned-rules.md
```

## Agent Configuration Pattern

All agents require YAML frontmatter:

```yaml
---
name: agent-name
description: "Short description. Keywords: trigger1, trigger2"
model: inherit | opus | sonnet
tools: Read, Write, Edit, Bash, Grep, Glob  # optional
---
```

## Workflow Integration

| Starting Point | Next Steps |
|----------------|------------|
| `/code-invs` | `/plan` (understand before change) |
| `/plan` | `/tdd` or `/architect` |
| `/architect` | `/plan` then `/tdd` |
| `/tdd` | `/cr` (review implementation) |
| `/cr` | Fix issues, commit |
| `/refactor-clean` | `/cr` (review cleanup) |
| `/update-codemaps` | Commit codemaps |

## Installation

Extensions are installed via symlinks:

```bash
# Command
ln -sf $(pwd)/commands/{name}.md ~/.claude/commands/{name}.md

# Skill
ln -sf $(pwd)/skills/{name} ~/.claude/skills/{name}

# Agent
ln -sf $(pwd)/agents/{name}/agent.md ~/.claude/agents/{name}.md
```
